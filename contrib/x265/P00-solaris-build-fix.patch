diff --git a/source/encoder/analysis.cpp b/source/encoder/analysis.cpp
index aabf386ca..d1be09622 100644
--- a/source/encoder/analysis.cpp
+++ b/source/encoder/analysis.cpp
@@ -3739,7 +3739,7 @@ void Analysis::normFactor(const pixel* src, uint32_t blockSize, CUData& ctu, int
 
     // 2. Calculate ac component
     uint64_t z_k = 0;
-    int block = (int)(((log(blockSize) / log(2)) - 2) + 0.5);
+    int block = (int)(((log((double) blockSize) / log((double) 2)) - 2) + 0.5);
     primitives.cu[block].normFact(src, blockSize, shift, &z_k);
 
     // Remove the DC part

diff --git a/source/encoder/encoder.cpp b/source/encoder/encoder.cpp
index d6d8025cd..a591b9676 100644
--- a/source/encoder/encoder.cpp
+++ b/source/encoder/encoder.cpp
@@ -118,6 +118,7 @@ VideoSignalTypePresets vstPresets[] =
 static const char* defaultAnalysisFileName = "x265_analysis.dat";
 
 using namespace X265_NS;
+using std::pow;
 
 Encoder::Encoder()
 {

