# Packaging tools define DESTDIR and this isn't needed for them
if(DEFINED ENV{DESTDIR})
  message(STATUS "Skipping post-install as DESTDIR is set")
else()
  find_program(UPDATE_ICON_CACHE NAMES gtk-update-icon-cache)
  if(UPDATE_ICON_CACHE)
    message(STATUS "Updating icon cache")
    execute_process(COMMAND ${UPDATE_ICON_CACHE} -tfq "@CMAKE_INSTALL_FULL_DATADIR@/icons/hicolor")
  else()
    message(STATUS "gtk-update-icon-cache was not found in PATH.")
  endif()

  find_program(UPDATE_DESKTOP_DATABASE NAMES update-desktop-database)
  if(UPDATE_DESKTOP_DATABASE)
    message(STATUS "Updating desktop database")
    execute_process(COMMAND update-desktop-database "@CMAKE_INSTALL_FULL_DATADIR@/applications" )
  else()
    message(STATUS "update-desktop-database was not found in PATH.")
  endif()
endif()
